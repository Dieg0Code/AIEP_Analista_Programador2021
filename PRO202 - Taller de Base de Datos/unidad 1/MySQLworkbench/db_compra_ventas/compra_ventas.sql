-- MySQL Script generated by MySQL Workbench
-- Mon Sep 13 12:29:24 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`DIRECCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DIRECCION` (
  `id_direccion` INT NOT NULL AUTO_INCREMENT,
  `dir_calle` VARCHAR(50) NOT NULL,
  `dir_numero` CHAR(5) NOT NULL,
  PRIMARY KEY (`id_direccion`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`PROVEEDOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PROVEEDOR` (
  `id_proveedor` INT NOT NULL AUTO_INCREMENT,
  `pro_rut` VARCHAR(10) NOT NULL,
  `pro_nombre` VARCHAR(40) NOT NULL,
  `pro_telefono` INT NOT NULL,
  `pro_pagina_web` VARCHAR(30) NULL,
  `DIRECCION_id_direccion` INT NOT NULL,
  PRIMARY KEY (`id_proveedor`),
  UNIQUE INDEX `pro_rut_UNIQUE` (`pro_rut` ASC),
  INDEX `fk_PROVEEDOR_DIRECCION_idx` (`DIRECCION_id_direccion` ASC),
  CONSTRAINT `fk_PROVEEDOR_DIRECCION`
    FOREIGN KEY (`DIRECCION_id_direccion`)
    REFERENCES `mydb`.`DIRECCION` (`id_direccion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`CLIENTE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CLIENTE` (
  `id_cliente` INT NOT NULL AUTO_INCREMENT,
  `cli_rut` VARCHAR(10) NOT NULL,
  `cli_nombre` VARCHAR(30) NOT NULL,
  `DIRECCION_id_direccion` INT NOT NULL,
  PRIMARY KEY (`id_cliente`),
  UNIQUE INDEX `cli_rut_UNIQUE` (`cli_rut` ASC),
  INDEX `fk_CLIENTE_DIRECCION1_idx` (`DIRECCION_id_direccion` ASC),
  CONSTRAINT `fk_CLIENTE_DIRECCION1`
    FOREIGN KEY (`DIRECCION_id_direccion`)
    REFERENCES `mydb`.`DIRECCION` (`id_direccion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`TELEFONO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`TELEFONO` (
  `id_telefono` INT NOT NULL AUTO_INCREMENT,
  `tel_numero` INT NOT NULL,
  `CLIENTE_id_cliente` INT NOT NULL,
  PRIMARY KEY (`id_telefono`),
  INDEX `fk_TELEFONO_CLIENTE1_idx` (`CLIENTE_id_cliente` ASC),
  CONSTRAINT `fk_TELEFONO_CLIENTE1`
    FOREIGN KEY (`CLIENTE_id_cliente`)
    REFERENCES `mydb`.`CLIENTE` (`id_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`CORREO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CORREO` (
  `id_correo` INT NOT NULL AUTO_INCREMENT,
  `cor_nombre` VARCHAR(50) NOT NULL,
  `CLIENTE_id_cliente` INT NOT NULL,
  PRIMARY KEY (`id_correo`),
  INDEX `fk_CORREO_CLIENTE1_idx` (`CLIENTE_id_cliente` ASC),
  CONSTRAINT `fk_CORREO_CLIENTE1`
    FOREIGN KEY (`CLIENTE_id_cliente`)
    REFERENCES `mydb`.`CLIENTE` (`id_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`CARGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CARGO` (
  `id_cargo` INT NOT NULL AUTO_INCREMENT,
  `car_nombre` VARCHAR(15) NOT NULL,
  PRIMARY KEY (`id_cargo`),
  UNIQUE INDEX `car_nombre_UNIQUE` (`car_nombre` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`TRABAJADOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`TRABAJADOR` (
  `id_trabajador` INT NOT NULL AUTO_INCREMENT,
  `tra_rut` VARCHAR(10) NOT NULL,
  `tra_nombre` VARCHAR(30) NOT NULL,
  `tra_apellidos` VARCHAR(30) NOT NULL,
  `tra_direccion` VARCHAR(80) NOT NULL,
  `tra_telefono` INT NOT NULL,
  `tra_correo` VARCHAR(30) NULL,
  `CARGO_id_cargo` INT NOT NULL,
  PRIMARY KEY (`id_trabajador`),
  UNIQUE INDEX `tra_rut_UNIQUE` (`tra_rut` ASC),
  UNIQUE INDEX `tra_correo_UNIQUE` (`tra_correo` ASC),
  INDEX `fk_TRABAJADOR_CARGO1_idx` (`CARGO_id_cargo` ASC),
  CONSTRAINT `fk_TRABAJADOR_CARGO1`
    FOREIGN KEY (`CARGO_id_cargo`)
    REFERENCES `mydb`.`CARGO` (`id_cargo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`COMPRA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`COMPRA` (
  `id_compra` INT NOT NULL AUTO_INCREMENT,
  `com_fecha` DATETIME NOT NULL,
  `com_descuento` FLOAT NULL,
  `com_precio_total` DECIMAL(10,0) NOT NULL,
  `PROVEEDOR_id_proveedor` INT NOT NULL,
  `TRABAJADOR_id_trabajador` INT NOT NULL,
  PRIMARY KEY (`id_compra`),
  INDEX `fk_COMPRA_PROVEEDOR1_idx` (`PROVEEDOR_id_proveedor` ASC),
  INDEX `fk_COMPRA_TRABAJADOR1_idx` (`TRABAJADOR_id_trabajador` ASC),
  CONSTRAINT `fk_COMPRA_PROVEEDOR1`
    FOREIGN KEY (`PROVEEDOR_id_proveedor`)
    REFERENCES `mydb`.`PROVEEDOR` (`id_proveedor`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COMPRA_TRABAJADOR1`
    FOREIGN KEY (`TRABAJADOR_id_trabajador`)
    REFERENCES `mydb`.`TRABAJADOR` (`id_trabajador`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`VENTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`VENTA` (
  `id_venta` INT NOT NULL,
  `ven_fecha` DATETIME NOT NULL,
  `ven_descuento` FLOAT NULL,
  `ven_precio_total` DECIMAL(10,0) NOT NULL,
  `CLIENTE_id_cliente` INT NOT NULL,
  PRIMARY KEY (`id_venta`),
  INDEX `fk_VENTA_CLIENTE1_idx` (`CLIENTE_id_cliente` ASC),
  CONSTRAINT `fk_VENTA_CLIENTE1`
    FOREIGN KEY (`CLIENTE_id_cliente`)
    REFERENCES `mydb`.`CLIENTE` (`id_cliente`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`CATEGORIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CATEGORIA` (
  `id_categoria` INT NOT NULL AUTO_INCREMENT,
  `cat_nombre` VARCHAR(30) NOT NULL,
  `cat_descripcion` VARCHAR(80) NOT NULL,
  PRIMARY KEY (`id_categoria`),
  UNIQUE INDEX `cat_nombre_UNIQUE` (`cat_nombre` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`BODEGA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`BODEGA` (
  `id_bodega` INT NOT NULL AUTO_INCREMENT,
  `bod_nombre` VARCHAR(15) NOT NULL,
  `bod_ubicacion` VARCHAR(5) NOT NULL,
  PRIMARY KEY (`id_bodega`),
  UNIQUE INDEX `bod_nombre_UNIQUE` (`bod_nombre` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`PRODUCTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PRODUCTO` (
  `id_producto` INT NOT NULL AUTO_INCREMENT,
  `prod_codigo` VARCHAR(30) NOT NULL,
  `prod_nombre` VARCHAR(30) NOT NULL,
  `prod_precio_actual` DECIMAL(10,0) NOT NULL,
  `prod_stock` INT NOT NULL,
  `CATEGORIA_id_categoria` INT NOT NULL,
  `BODEGA_id_bodega` INT NOT NULL,
  PRIMARY KEY (`id_producto`),
  UNIQUE INDEX `prod_nombre_UNIQUE` (`prod_nombre` ASC),
  UNIQUE INDEX `prod_codigo_UNIQUE` (`prod_codigo` ASC),
  INDEX `fk_PRODUCTO_CATEGORIA1_idx` (`CATEGORIA_id_categoria` ASC),
  INDEX `fk_PRODUCTO_BODEGA1_idx` (`BODEGA_id_bodega` ASC),
  CONSTRAINT `fk_PRODUCTO_CATEGORIA1`
    FOREIGN KEY (`CATEGORIA_id_categoria`)
    REFERENCES `mydb`.`CATEGORIA` (`id_categoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PRODUCTO_BODEGA1`
    FOREIGN KEY (`BODEGA_id_bodega`)
    REFERENCES `mydb`.`BODEGA` (`id_bodega`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`DETALLE_COMPRA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DETALLE_COMPRA` (
  `id_det_compra` INT NOT NULL AUTO_INCREMENT,
  `det_com_cantidad` INT NOT NULL,
  `COMPRA_id_compra` INT NOT NULL,
  `PRODUCTO_id_producto` INT NOT NULL,
  PRIMARY KEY (`id_det_compra`),
  INDEX `fk_DETALLE_COMPRA_COMPRA1_idx` (`COMPRA_id_compra` ASC),
  INDEX `fk_DETALLE_COMPRA_PRODUCTO1_idx` (`PRODUCTO_id_producto` ASC),
  CONSTRAINT `fk_DETALLE_COMPRA_COMPRA1`
    FOREIGN KEY (`COMPRA_id_compra`)
    REFERENCES `mydb`.`COMPRA` (`id_compra`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DETALLE_COMPRA_PRODUCTO1`
    FOREIGN KEY (`PRODUCTO_id_producto`)
    REFERENCES `mydb`.`PRODUCTO` (`id_producto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


-- -----------------------------------------------------
-- Table `mydb`.`DETALLE_VENTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DETALLE_VENTA` (
  `id_det_venta` INT NOT NULL AUTO_INCREMENT,
  `det_ven_cantidad` INT NOT NULL,
  `VENTA_id_venta` INT NOT NULL,
  `PRODUCTO_id_producto` INT NOT NULL,
  PRIMARY KEY (`id_det_venta`),
  INDEX `fk_DETALLE_VENTA_VENTA1_idx` (`VENTA_id_venta` ASC),
  INDEX `fk_DETALLE_VENTA_PRODUCTO1_idx` (`PRODUCTO_id_producto` ASC),
  CONSTRAINT `fk_DETALLE_VENTA_VENTA1`
    FOREIGN KEY (`VENTA_id_venta`)
    REFERENCES `mydb`.`VENTA` (`id_venta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DETALLE_VENTA_PRODUCTO1`
    FOREIGN KEY (`PRODUCTO_id_producto`)
    REFERENCES `mydb`.`PRODUCTO` (`id_producto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8
COLLATE = utf8_spanish_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
